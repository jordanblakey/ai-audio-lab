syntax = "proto3";

package transcription;

service WhisperTranscriber {
  // Streams audio chunks to the server and receives transcription results back.
  rpc StreamTranscription (stream AudioChunk) returns (stream TranscriptionResult) {}
}

message AudioChunk {
  // Raw PCM audio data as float32.
  bytes data = 1;
  // Sample rate of the provided audio.
  int32 sample_rate = 2;
}

message TranscriptionResult {
  // The transcribed text.
  string text = 1;
  // Whether this is a final result for this segment.
  bool is_final = 2;
  // Start time of the segment in seconds, relative to the stream start.
  float start_time = 3;
}